#!/usr/bin/env -S elisp
;; -*- mode: emacs-lisp; -*-

(let ((frame (make-frame-on-display "wayland-1")))
  (select-frame frame)
  (setq default-directory (or (getenv "PWD") (getenv "HOME")))
  (let ((shbuf (shell (vz/uniqify "*term"))))
    (switch-to-buffer shbuf)
    (delete-other-windows)
    (setq-local mode-line-format nil
                vz/eterm--frame frame)
    (set-process-sentinel (get-buffer-process shbuf) #'vz/eterm--sentinel)
    (add-to-list 'vz/eterm--frames frame)
    (set-frame-parameter frame 'term-buffer shbuf)))
